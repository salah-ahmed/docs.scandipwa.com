{"componentChunkName":"component---src-templates-docs-js","path":"/docs/plugin-mechanism.html","result":{"data":{"markdownRemark":{"html":"<p>ScandiPWA v3 (currently in beta) supports frontend plugins, which allow reusing one piece of code throughout a lot of completely different projects. This guide is devoted to explaining all the functionality related to plugins.</p>\n<h2 id=\"watch-an-explanation-video\"><a href=\"#watch-an-explanation-video\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Watch an explanation video</h2>\n<h3 id=\"implementing-an-extension-from-scratch\"><a href=\"#implementing-an-extension-from-scratch\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implementing an extension from scratch</h3>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; \" > <div class=\"video\"> <iframe src=\"https://www.youtube.com/embed/9f6rpIrlNMk\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div> </div>\n<h3 id=\"implementing-an-extension-from-customisation\"><a href=\"#implementing-an-extension-from-customisation\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implementing an extension from customisation</h3>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; \" > <div class=\"video\"> <iframe src=\"https://www.youtube.com/embed/N2TJJbSDTbM\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div> </div>\n<h2 id=\"extensions-file-structure\"><a href=\"#extensions-file-structure\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extensionâ€™s file structure</h2>\n<p>ScandiPWA extension is M2 composer package with one extra directory - <code class=\"gatsby-code-text\">scandipwa</code>. Inside of it ScandiPWA frontend-related functionality is stored. Any other M2 related folders with backend-related functionality can be stored in such package. You see <code class=\"gatsby-code-text\">etc</code> and <code class=\"gatsby-code-text\">Model</code> in this example, but these are not the only possible ones.</p>\n<p>All <em>directories</em> inside of <code class=\"gatsby-code-text\">scandipwa</code> are optional, nevertheless following the provided structure is mandatory. You see <code class=\"gatsby-code-text\">app</code> and <code class=\"gatsby-code-text\">sw</code> subdirectories in it, these foldersâ€™ structure is the same as you see in <code class=\"gatsby-code-text\">vendor/scandipwa/source/src/(app|sw)</code> and they have the same meaning: inside of them are all parts that your extension requires: extra components, queries, routes etc.</p>\n<p><code class=\"gatsby-code-text\">Plugin</code> directory contains plugin definitions: which functionality parts are you plugging into and how you want to change their behaviour. More about that below.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"33742634979369644000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`ðŸ“¦my-awesome-extension\n â”£ ðŸ“‚src\n â”ƒ â”£ ðŸ“‚etc\n â”ƒ â”ƒ â”— # ...\n â”ƒ â”£ ðŸ“‚Model\n â”ƒ â”ƒ â”— # ...\n â”ƒ â”— ðŸ“‚scandipwa   # Frontend-related functionality\n â”ƒ   â”£ ðŸ“œ index.js # Plugin FE entry point - mandatory!\n â”ƒ   â”£ ðŸ“‚ app      # Application logic\n â”ƒ   â”ƒ â”£ ðŸ“‚component\n â”ƒ   â”ƒ â”£ ðŸ“‚query\n â”ƒ   â”ƒ â”£ ðŸ“‚route\n â”ƒ   â”ƒ â”£ ðŸ“‚store\n â”ƒ   â”ƒ â”£ ðŸ“‚util\n â”ƒ   â”ƒ â”— ðŸ“‚plugin  # Plugging logic declarations\n â”ƒ   â”ƒ   â”— ðŸ“œ<SourceComponentName>.plugin.js\n â”ƒ   â”— ðŸ“‚ sw       # Service Worker\n â”ƒ     â”£ ðŸ“‚handler\n â”ƒ     â”£ ðŸ“‚util\n â”ƒ     â”— ðŸ“‚plugin  # Plugging logic declarations\n â”ƒ       â”— ðŸ“œ<SourceServiceWorkerFileName>.plugin.js\n â”— ðŸ“œcomposer.json`, `33742634979369644000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"gatsby-code-bash\"><code class=\"gatsby-code-bash\">ðŸ“¦my-awesome-extension\n â”£ ðŸ“‚src\n â”ƒ â”£ ðŸ“‚etc\n â”ƒ â”ƒ â”— <span class=\"token comment\"># ...</span>\n â”ƒ â”£ ðŸ“‚Model\n â”ƒ â”ƒ â”— <span class=\"token comment\"># ...</span>\n â”ƒ â”— ðŸ“‚scandipwa   <span class=\"token comment\"># Frontend-related functionality</span>\n â”ƒ   â”£ ðŸ“œ index.js <span class=\"token comment\"># Plugin FE entry point - mandatory!</span>\n â”ƒ   â”£ ðŸ“‚ app      <span class=\"token comment\"># Application logic</span>\n â”ƒ   â”ƒ â”£ ðŸ“‚component\n â”ƒ   â”ƒ â”£ ðŸ“‚query\n â”ƒ   â”ƒ â”£ ðŸ“‚route\n â”ƒ   â”ƒ â”£ ðŸ“‚store\n â”ƒ   â”ƒ â”£ ðŸ“‚util\n â”ƒ   â”ƒ â”— ðŸ“‚plugin  <span class=\"token comment\"># Plugging logic declarations</span>\n â”ƒ   â”ƒ   â”— ðŸ“œ<span class=\"token operator\">&lt;</span>SourceComponentName<span class=\"token operator\">></span>.plugin.js\n â”ƒ   â”— ðŸ“‚ sw       <span class=\"token comment\"># Service Worker</span>\n â”ƒ     â”£ ðŸ“‚handler\n â”ƒ     â”£ ðŸ“‚util\n â”ƒ     â”— ðŸ“‚plugin  <span class=\"token comment\"># Plugging logic declarations</span>\n â”ƒ       â”— ðŸ“œ<span class=\"token operator\">&lt;</span>SourceServiceWorkerFileName<span class=\"token operator\">></span>.plugin.js\n â”— ðŸ“œcomposer.json</code></pre></div>\n<h2 id=\"a-step-by-step-algorithm-of-creating-a-simple-extension\"><a href=\"#a-step-by-step-algorithm-of-creating-a-simple-extension\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A step-by-step algorithm of creating a simple extension</h2>\n<p>This document is an addition to the video tutorial above. You are welcome to watch it in order to learn from an example. Start with understanding how you wish to change ScandiPWA logic. Find the places which need modification.</p>\n<ol>\n<li>Create a <code class=\"gatsby-code-text\">localmodules</code> directory in the magento root of your application. Then create a composer package there. Inside of it, in <code class=\"gatsby-code-text\">src/scandipwa/plugin</code>, create <code class=\"gatsby-code-text\">ComponentName.plugin.js</code> file, where <code class=\"gatsby-code-text\">ComponentName</code> is name of the component youâ€™d like to modify.</li>\n<li>In there, you should create a class <code class=\"gatsby-code-text\">ComponentNamePlugin</code>, its members are meant to wrap around the <code class=\"gatsby-code-text\">SampleClass</code> members and be ran instead of the original members. It is essential that wrapper members must be arrow functions, otherwise your pluginâ€™s context will not be available from inside of them.</li>\n</ol>\n<blockquote>\n<p><strong>Note</strong>:</p>\n<p>It is recommended to stick to the naming convention regarding the arguments of these functions.</p>\n</blockquote>\n<p>Each member which wraps around a <strong><em>function</em></strong> has the following arguments.</p>\n<ul>\n<li><code class=\"gatsby-code-text\">args</code> is an array of original arguments that are passed to the function this one is wrapped around.</li>\n<li><code class=\"gatsby-code-text\">callback</code> is function that calls the next plugin if there is one, or the original method, when all plugins defined for this method are applied.</li>\n<li><code class=\"gatsby-code-text\">instance</code> references the object you are plugging into.</li>\n</ul>\n<p>Each member which wraps around a <strong><em>property</em></strong>  has the following arguments:</p>\n<ul>\n<li><code class=\"gatsby-code-text\">originalMember</code> is the member you are plugging into.</li>\n<li><code class=\"gatsby-code-text\">instance</code> references the object you are plugging into.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"40848562807643440000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// This wraps around the member function, logs the arguments and adds one to the first argument\n// It is essential that wrapper function is an arrow function!\n// Otherwise other member functions will not be available from it.\nconst aroundFunction = (args, callback, instance) => {\n    console.log(args); // [ ...arguments ]\n    args[0] += 1;\n\n    // The context must ALWAYS be passed to the callback, using 'apply' for that\n    // Note that the original member (or the next plugin) will be called with changed arguments\n    callback.apply(instance, args);\n}\n\n// This wraps around a property\nconst property = (initialProperty, instance) => {\n    return {\n        ...initialProperty,\n        // And adds this new value to it\n        someAddedValue: 'new value!'\n    }\n}\n\nconst classWrapper = (Class) => {\n    // Return the original class intact\n    return Class;\n\n    // Return the original class wrapped into HOC or something else\n    return withRouter(Class);\n    return connect(...)(Class);\n\n    // Replace the original class with something else\n    return OtherClass;\n}`, `40848562807643440000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// This wraps around the member function, logs the arguments and adds one to the first argument</span>\n<span class=\"token comment\">// It is essential that wrapper function is an arrow function!</span>\n<span class=\"token comment\">// Otherwise other member functions will not be available from it.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">aroundFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">args<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">,</span> instance</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [ ...arguments ]</span>\n    args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// The context must ALWAYS be passed to the callback, using 'apply' for that</span>\n    <span class=\"token comment\">// Note that the original member (or the next plugin) will be called with changed arguments</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// This wraps around a property</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">property</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialProperty<span class=\"token punctuation\">,</span> instance</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>initialProperty<span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// And adds this new value to it</span>\n        someAddedValue<span class=\"token operator\">:</span> <span class=\"token string\">'new value!'</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">classWrapper</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">Class</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Return the original class intact</span>\n    <span class=\"token keyword\">return</span> Class<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Return the original class wrapped into HOC or something else</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>Class<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Class<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Replace the original class with something else</span>\n    <span class=\"token keyword\">return</span> OtherClass<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>Create the configuration in the bottom of <code class=\"gatsby-code-text\">.plugin.js</code> file. This object must be a default export. The following things are defined in this configuration:</li>\n<li>Which namespace to modify</li>\n<li>\n<p>How what exactly in the namespace would you like to modify</p>\n<ul>\n<li><em>â€˜member-functionâ€™</em> plugins intercept calls to <strong>instance members</strong>. These plugins are used to change the behavior of member functions, which are called on instance.</li>\n<li><em>â€˜member-propertyâ€™</em> is an approach to change <strong>properties</strong>, which are not available on prototypes, e.g. state in a way itâ€™s defined throughout the ScandiPWA (<code class=\"gatsby-code-text\">state = { ... };</code>).</li>\n<li><em>â€˜static-memberâ€™</em> plugins enable changing classesâ€™ <strong>static members</strong>.</li>\n<li><em>â€˜functionâ€™</em> is an approach to change <strong>functions</strong> which are not class members, e.g. <code class=\"gatsby-code-text\">mapStateToProps</code> or <code class=\"gatsby-code-text\">mapDispatchToProps</code>.</li>\n<li><em>â€˜classâ€™</em> is an approach to modify <strong>classes</strong>. These plugins are able to modify the class, wrapping it into HOC or, in extreme cases, replacing it with other class. The second approach is not recommended because it is not well-compatible with potential other plugins wrapping around members of the same namespaces.</li>\n</ul>\n</li>\n<li>Name of the member to modify (for everything apart of â€˜functionâ€™ and â€˜classâ€™ plugins)</li>\n<li>Optional: a position, in which this plugin will be called. <strong>Defaults to 100</strong>. There may be multiple plugins for a single member if there are several extensions active in the application. The closer the position to 0 - the sooner it is called. The higher a position - the later. Non-unique.</li>\n</ol>\n<blockquote>\n<p><strong>Note</strong>:</p>\n<p>you can create class members that do not exist in the original classes and they will be called as youâ€™d expect writing them directly in the class</p>\n</blockquote>\n<p>Configuration should follow this format:</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"47206405092264480000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`const config = {\n    namespace: {\n        'member-function': {\n            '<name>': Plugins1\n        },\n        'member-property': {\n            '<name>': Plugins2\n        },\n        'static-member': {\n            '<name>': Plugins3\n        },\n\n        // Reduced structure for functions and classes\n        'function': Plugins4,\n        'class': Plugins5\n    }\n}`, `47206405092264480000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    namespace<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'member-function'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'&lt;name>'</span><span class=\"token operator\">:</span> Plugins1\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'member-property'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'&lt;name>'</span><span class=\"token operator\">:</span> Plugins2\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'static-member'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'&lt;name>'</span><span class=\"token operator\">:</span> Plugins3\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// Reduced structure for functions and classes</span>\n        <span class=\"token string\">'function'</span><span class=\"token operator\">:</span> Plugins4<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'class'</span><span class=\"token operator\">:</span> Plugins5\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Where <code class=\"gatsby-code-text\">Plugins</code> is either a function, an object or an Array of functions/objects. See valid <code class=\"gatsby-code-text\">Plugins</code> blocksâ€™ example below.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"53798480050116450000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// Simplest option, you are going to use it in most cases\nconst Plugins1 = A;\n\n// If you need more granular logic around one original member\nconst Plugins2 = [B, C];\n\n// Specify a position to execute your plugins sooner/later in the pipeline\nconst Plugins3 = {\n    position: 0,\n    implementation: aVeryImportantFunction\n};\n\n// Same as 2nd option, but with positions.\nconst Plugins4 = [\n    {\n        position: 0,\n        implementation: oneMoreVeryImportantFunction\n    },\n    {\n        position: 1000,\n        implementation: notVeryImportantFunction\n    }\n];`, `53798480050116450000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Simplest option, you are going to use it in most cases</span>\n<span class=\"token keyword\">const</span> Plugins1 <span class=\"token operator\">=</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// If you need more granular logic around one original member</span>\n<span class=\"token keyword\">const</span> Plugins2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">B</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">C</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Specify a position to execute your plugins sooner/later in the pipeline</span>\n<span class=\"token keyword\">const</span> Plugins3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    position<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    implementation<span class=\"token operator\">:</span> aVeryImportantFunction\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Same as 2nd option, but with positions.</span>\n<span class=\"token keyword\">const</span> Plugins4 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        position<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        implementation<span class=\"token operator\">:</span> oneMoreVeryImportantFunction\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        position<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n        implementation<span class=\"token operator\">:</span> notVeryImportantFunction\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The example below demonstrates an example of multiple syntax opportunities for writing a configuration part.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"48233300917896020000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`const config = {\n    namespace: {\n        'member-function': {\n            '<name>': B\n        },\n        'member-property': {\n            '<name>': [\n                {\n                    implementation: D\n                }\n            ]\n        },\n        'static-member': {\n            '<name>': [\n                {\n                    position: E,\n                    implementation: F\n                }\n            ]\n        },\n        'function': [ I, J ],\n        'class': K\n    }\n}`, `48233300917896020000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    namespace<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'member-function'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'&lt;name>'</span><span class=\"token operator\">:</span> <span class=\"token constant\">B</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'member-property'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'&lt;name>'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    implementation<span class=\"token operator\">:</span> <span class=\"token constant\">D</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'static-member'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'&lt;name>'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    position<span class=\"token operator\">:</span> <span class=\"token constant\">E</span><span class=\"token punctuation\">,</span>\n                    implementation<span class=\"token operator\">:</span> <span class=\"token constant\">F</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'function'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token constant\">I</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">J</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'class'</span><span class=\"token operator\">:</span> <span class=\"token constant\">K</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>Having an <code class=\"gatsby-code-text\">index.js</code> file in the root of your extension is mandatory. It should contain no logic, only a single export: array that consists of relative paths from that file to all the <code class=\"gatsby-code-text\">.plugin.js</code> files your extension declares. See the example below.</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"55846828045615110000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`module.exports = [\n    './app/plugin/SomeAppPlugin.plugin.js',\n    './sw/plugin/SomeSWPlugin.plugin.js'\n]`, `55846828045615110000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'./app/plugin/SomeAppPlugin.plugin.js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'./sw/plugin/SomeSWPlugin.plugin.js'</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<ol start=\"5\">\n<li>Activate your plugin. In the FE root of your theme, there is a file called <code class=\"gatsby-code-text\">scandipwa.json</code>. It is responsible for themeâ€™s configuration. Active plugins should be defined there.</li>\n</ol>\n<p>Contents:</p>\n<ul>\n<li><code class=\"gatsby-code-text\">&lt;extension name&gt;</code>: should be picked by you, it is not related to any functionality, just denotes which plugin files are meant for which extension. Put anything you like here.</li>\n<li><code class=\"gatsby-code-text\">&lt;path&gt;</code>: a single relative path from Magento root to the <code class=\"gatsby-code-text\">scandipwa/index.js</code> file.</li>\n</ul>\n<p>The format for the â€˜extensionsâ€™ block of this file is the following:</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"96505141374664330000\"\n              data-toaster-class=\"gatsby-code-button-toaster customToasterClass\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text customToasterTextClass\"\n              data-toaster-text=\"Copied\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`{\n    // ...\n    &quot;extensions&quot;: {\n        &quot;<extension>&quot;: &quot;<path>&quot;,\n        &quot;<extension2>&quot;: &quot;<path2>&quot;,\n        /** other extensions */\n    }\n    // ...\n}`, `96505141374664330000`)\"\n            >\n              <div\n                class=\"gatsby-code-button customButtonClass\"\n                data-tooltip=\"\"\n              >\n                Copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token string\">\"extensions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"&lt;extension>\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;path>\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"&lt;extension2>\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;path2>\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">/** other extensions */</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"plugins-for-plugins\"><a href=\"#plugins-for-plugins\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Plugins for plugins!</h2>\n<p>ScandiPWA allows <strong>plugging into plugins</strong>. All classes that your plugin requires should be assigned namespaces by wrapping them into the <code class=\"gatsby-code-text\">middleware</code> function. The only exception is that plugin class in <code class=\"gatsby-code-text\">.plugin.js</code> file cannot be plugged into due to configuration builderâ€™s limitations. It still can be overriden as described in the extension guide though.</p>","frontmatter":{"title":"ScandiPWA plugins"},"fields":{"path":"content/docs/plugin-mechanism.md","slug":"/docs/plugin-mechanism.html"}}},"pageContext":{"slug":"/docs/plugin-mechanism.html"}},"staticQueryHashes":[]}